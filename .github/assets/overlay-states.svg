<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 200" width="700" height="200">
  <defs>
    <!-- Idle button shadow -->
    <filter id="idle-shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    <!-- Recording glow -->
    <filter id="rec-glow" x="-40%" y="-40%" width="180%" height="180%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
      <feColorMatrix in="blur" type="matrix" values="1 0 0 0 0.3  0 0.2 0 0 0  0 0 0.2 0 0  0 0 0 0.6 0" result="glow"/>
      <feMerge>
        <feMergeNode in="glow"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <!-- Processing shadow -->
    <filter id="proc-shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/>
    </filter>

    <style>
      @keyframes pulse-ring {
        0%, 100% { r: 46; opacity: 0.3; }
        50% { r: 52; opacity: 0.15; }
      }
      @keyframes pulse-mic {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.12); opacity: 0.7; }
      }
      @keyframes bar-bounce {
        0%, 100% { transform: scaleY(1); opacity: 0.5; }
        50% { transform: scaleY(2); opacity: 1; }
      }
      @keyframes hover-glow {
        0%, 100% { opacity: 0; }
        50% { opacity: 0.08; }
      }
      .rec-ring { animation: pulse-ring 1.5s ease-in-out infinite; }
      .rec-mic { animation: pulse-mic 1.2s ease-in-out infinite; transform-origin: 350px 80px; }
      .bar-0 { animation: bar-bounce 0.8s ease-in-out 0s infinite; transform-origin: center; }
      .bar-1 { animation: bar-bounce 0.8s ease-in-out 0.15s infinite; transform-origin: center; }
      .bar-2 { animation: bar-bounce 0.8s ease-in-out 0.3s infinite; transform-origin: center; }
      .idle-hover { animation: hover-glow 3s ease-in-out infinite; }
    </style>
  </defs>

  <!-- ===================== IDLE STATE ===================== -->
  <g>
    <!-- Subtle hover glow -->
    <circle cx="120" cy="80" r="44" fill="#88C0D0" class="idle-hover"/>

    <!-- Button body -->
    <circle cx="120" cy="80" r="38" fill="#3B4252" stroke="#434C5E" stroke-width="2.5" filter="url(#idle-shadow)"/>

    <!-- Mic icon (Frost cyan) -->
    <g fill="none" stroke="#88C0D0" stroke-width="2.2" stroke-linecap="round">
      <!-- Mic body -->
      <rect x="112" y="64" width="16" height="22" rx="8" fill="#88C0D0" stroke="none"/>
      <!-- Cradle -->
      <path d="M106 80 Q106 95 120 95 Q134 95 134 80"/>
      <!-- Stand -->
      <line x1="120" y1="95" x2="120" y2="101"/>
      <!-- Base -->
      <line x1="113" y1="101" x2="127" y2="101"/>
    </g>

    <!-- Label -->
    <text x="120" y="150" text-anchor="middle" fill="#D8DEE9" font-family="Segoe UI, system-ui, sans-serif" font-size="14" font-weight="500">Idle</text>
    <text x="120" y="168" text-anchor="middle" fill="#4C566A" font-family="Segoe UI, system-ui, sans-serif" font-size="11">Ready to record</text>
  </g>

  <!-- =================== RECORDING STATE =================== -->
  <g>
    <!-- Pulsing outer ring (audio level) -->
    <circle cx="350" cy="80" r="46" fill="none" stroke="#BF616A" stroke-width="3" opacity="0.3" class="rec-ring"/>

    <!-- Button body (destructive red) -->
    <circle cx="350" cy="80" r="38" fill="#BF616A" stroke="#BF616A" stroke-width="2.5" filter="url(#rec-glow)"/>

    <!-- Mic icon (white, pulsing) -->
    <g class="rec-mic" fill="none" stroke="#ECEFF4" stroke-width="2.2" stroke-linecap="round">
      <!-- Mic body -->
      <rect x="342" y="64" width="16" height="22" rx="8" fill="#ECEFF4" stroke="none"/>
      <!-- Cradle -->
      <path d="M336 80 Q336 95 350 95 Q364 95 364 80"/>
      <!-- Stand -->
      <line x1="350" y1="95" x2="350" y2="101"/>
      <!-- Base -->
      <line x1="343" y1="101" x2="357" y2="101"/>
    </g>

    <!-- Label -->
    <text x="350" y="150" text-anchor="middle" fill="#BF616A" font-family="Segoe UI, system-ui, sans-serif" font-size="14" font-weight="500">Recording</text>
    <text x="350" y="168" text-anchor="middle" fill="#4C566A" font-family="Segoe UI, system-ui, sans-serif" font-size="11">Listening to speech</text>
  </g>

  <!-- ================== PROCESSING STATE ================== -->
  <g>
    <!-- Button body -->
    <circle cx="580" cy="80" r="38" fill="#3B4252" stroke="#3B4252" stroke-width="2.5" filter="url(#proc-shadow)"/>

    <!-- Loading bars (Snow Storm white, staggered animation) -->
    <rect x="571" y="75" width="4" height="10" rx="2" fill="#D8DEE9" class="bar-0"/>
    <rect x="578" y="75" width="4" height="10" rx="2" fill="#D8DEE9" class="bar-1"/>
    <rect x="585" y="75" width="4" height="10" rx="2" fill="#D8DEE9" class="bar-2"/>

    <!-- Label -->
    <text x="580" y="150" text-anchor="middle" fill="#EBCB8B" font-family="Segoe UI, system-ui, sans-serif" font-size="14" font-weight="500">Processing</text>
    <text x="580" y="168" text-anchor="middle" fill="#4C566A" font-family="Segoe UI, system-ui, sans-serif" font-size="11">Transcribing &amp; enhancing</text>
  </g>

  <!-- Arrows between states -->
  <defs>
    <marker id="arr" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="7" markerHeight="7" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#81A1C1"/>
    </marker>
  </defs>
  <line x1="170" y1="80" x2="295" y2="80" stroke="#81A1C1" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr)"/>
  <text x="232" y="72" text-anchor="middle" fill="#81A1C1" font-family="Segoe UI, system-ui, sans-serif" font-size="10">click / hotkey</text>

  <line x1="400" y1="80" x2="525" y2="80" stroke="#81A1C1" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arr)"/>
  <text x="462" y="72" text-anchor="middle" fill="#81A1C1" font-family="Segoe UI, system-ui, sans-serif" font-size="10">stop</text>
</svg>
